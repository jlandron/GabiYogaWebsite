{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"GabiYogaNetwork":{"id":"GabiYogaNetwork","path":"GabiYogaNetwork","children":{"GabiYogaVpc":{"id":"GabiYogaVpc","path":"GabiYogaNetwork/GabiYogaVpc","children":{"Resource":{"id":"Resource","path":"GabiYogaNetwork/GabiYogaVpc/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.192.0"}},"publicSubnet1":{"id":"publicSubnet1","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1","children":{"Subnet":{"id":"Subnet","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"GabiYogaVpcpublicSubnet1RouteTable1F428903"},"subnetId":{"Ref":"GabiYogaVpcpublicSubnet1SubnetF78B4A21"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"GabiYogaVpcIGW50990E5E"},"routeTableId":{"Ref":"GabiYogaVpcpublicSubnet1RouteTable1F428903"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}},"EIP":{"id":"EIP","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.192.0"}},"NATGateway":{"id":"NATGateway","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["GabiYogaVpcpublicSubnet1EIP096CF0CB","AllocationId"]},"subnetId":{"Ref":"GabiYogaVpcpublicSubnet1SubnetF78B4A21"},"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/publicSubnet1"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.192.0","metadata":[]}},"publicSubnet2":{"id":"publicSubnet2","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2","children":{"Subnet":{"id":"Subnet","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"GabiYogaVpcpublicSubnet2RouteTableC20D95EB"},"subnetId":{"Ref":"GabiYogaVpcpublicSubnet2Subnet810C6076"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"GabiYogaNetwork/GabiYogaVpc/publicSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"GabiYogaVpcIGW50990E5E"},"routeTableId":{"Ref":"GabiYogaVpcpublicSubnet2RouteTableC20D95EB"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.192.0","metadata":[]}},"privateSubnet1":{"id":"privateSubnet1","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1","children":{"Subnet":{"id":"Subnet","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2a","cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"GabiYogaVpcprivateSubnet1RouteTableF3396FB0"},"subnetId":{"Ref":"GabiYogaVpcprivateSubnet1Subnet2F4652B7"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"GabiYogaVpcpublicSubnet1NATGatewayE5CBB5D0"},"routeTableId":{"Ref":"GabiYogaVpcprivateSubnet1RouteTableF3396FB0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.192.0","metadata":[]}},"privateSubnet2":{"id":"privateSubnet2","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2","children":{"Subnet":{"id":"Subnet","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2b","cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"GabiYogaVpcprivateSubnet2RouteTableC905CE53"},"subnetId":{"Ref":"GabiYogaVpcprivateSubnet2Subnet0EC07943"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"GabiYogaNetwork/GabiYogaVpc/privateSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"GabiYogaVpcpublicSubnet1NATGatewayE5CBB5D0"},"routeTableId":{"Ref":"GabiYogaVpcprivateSubnet2RouteTableC905CE53"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.192.0","metadata":[]}},"isolatedSubnet1":{"id":"isolatedSubnet1","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet1","children":{"Subnet":{"id":"Subnet","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2a","cidrBlock":"10.0.4.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet1"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet1"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"GabiYogaVpcisolatedSubnet1RouteTableDE27647D"},"subnetId":{"Ref":"GabiYogaVpcisolatedSubnet1Subnet239155F5"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.192.0","metadata":[]}},"isolatedSubnet2":{"id":"isolatedSubnet2","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet2","children":{"Subnet":{"id":"Subnet","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-west-2b","cidrBlock":"10.0.5.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet2"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.192.0"}},"Acl":{"id":"Acl","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet2"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.192.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"GabiYogaNetwork/GabiYogaVpc/isolatedSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"GabiYogaVpcisolatedSubnet2RouteTable242B88A0"},"subnetId":{"Ref":"GabiYogaVpcisolatedSubnet2SubnetA5C8DA17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.192.0","metadata":[]}},"IGW":{"id":"IGW","path":"GabiYogaNetwork/GabiYogaVpc/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaNetwork/GabiYogaVpc"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.192.0"}},"VPCGW":{"id":"VPCGW","path":"GabiYogaNetwork/GabiYogaVpc/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"GabiYogaVpcIGW50990E5E"},"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.192.0","metadata":[]}},"WebSecurityGroup":{"id":"WebSecurityGroup","path":"GabiYogaNetwork/WebSecurityGroup","children":{"Resource":{"id":"Resource","path":"GabiYogaNetwork/WebSecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Allow web traffic","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow HTTP traffic"},{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":443,"toPort":443,"description":"Allow HTTPS traffic"}],"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Ref":"GabiYogaVpcB4D40C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.192.0","metadata":[]}},"VpcId":{"id":"VpcId","path":"GabiYogaNetwork/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"GabiYogaNetwork/CDKMetadata","children":{"Default":{"id":"Default","path":"GabiYogaNetwork/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Exports":{"id":"Exports","path":"GabiYogaNetwork/Exports","children":{"Output{\"Fn::GetAtt\":[\"GabiYogaVpcB4D40C5D\",\"CidrBlock\"]}":{"id":"Output{\"Fn::GetAtt\":[\"GabiYogaVpcB4D40C5D\",\"CidrBlock\"]}","path":"GabiYogaNetwork/Exports/Output{\"Fn::GetAtt\":[\"GabiYogaVpcB4D40C5D\",\"CidrBlock\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"Output{\"Ref\":\"GabiYogaVpcB4D40C5D\"}":{"id":"Output{\"Ref\":\"GabiYogaVpcB4D40C5D\"}","path":"GabiYogaNetwork/Exports/Output{\"Ref\":\"GabiYogaVpcB4D40C5D\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"Output{\"Ref\":\"GabiYogaVpcisolatedSubnet1Subnet239155F5\"}":{"id":"Output{\"Ref\":\"GabiYogaVpcisolatedSubnet1Subnet239155F5\"}","path":"GabiYogaNetwork/Exports/Output{\"Ref\":\"GabiYogaVpcisolatedSubnet1Subnet239155F5\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"Output{\"Ref\":\"GabiYogaVpcisolatedSubnet2SubnetA5C8DA17\"}":{"id":"Output{\"Ref\":\"GabiYogaVpcisolatedSubnet2SubnetA5C8DA17\"}","path":"GabiYogaNetwork/Exports/Output{\"Ref\":\"GabiYogaVpcisolatedSubnet2SubnetA5C8DA17\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"Output{\"Ref\":\"GabiYogaVpcpublicSubnet1SubnetF78B4A21\"}":{"id":"Output{\"Ref\":\"GabiYogaVpcpublicSubnet1SubnetF78B4A21\"}","path":"GabiYogaNetwork/Exports/Output{\"Ref\":\"GabiYogaVpcpublicSubnet1SubnetF78B4A21\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"Output{\"Ref\":\"GabiYogaVpcpublicSubnet2Subnet810C6076\"}":{"id":"Output{\"Ref\":\"GabiYogaVpcpublicSubnet2Subnet810C6076\"}","path":"GabiYogaNetwork/Exports/Output{\"Ref\":\"GabiYogaVpcpublicSubnet2Subnet810C6076\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"GabiYogaNetwork/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"GabiYogaNetwork/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.192.0"}},"GabiYogaStorage":{"id":"GabiYogaStorage","path":"GabiYogaStorage","children":{"StorageBucket":{"id":"StorageBucket","path":"GabiYogaStorage/StorageBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.192.0","metadata":[]}},"OriginAccessControl":{"id":"OriginAccessControl","path":"GabiYogaStorage/OriginAccessControl","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"GabiYogaS3Access","originAccessControlOriginType":"s3","signingBehavior":"always","signingProtocol":"sigv4","description":"Access control for Gabi Yoga S3 bucket"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.192.0"}},"BucketPolicy":{"id":"BucketPolicy","path":"GabiYogaStorage/BucketPolicy","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":"gabi-yoga-uploads","policyDocument":{"Version":"2012-10-17","Statement":[{"Action":["s3:GetObject"],"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::gabi-yoga-uploads/*"]]},"Condition":{"StringEquals":{"AWS:SourceArn":"arn:aws:cloudfront::891709159344:distribution/*"}}}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.192.0"}},"LogBucket":{"id":"LogBucket","path":"GabiYogaStorage/LogBucket","children":{"Resource":{"id":"Resource","path":"GabiYogaStorage/LogBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"lifecycleConfiguration":{"rules":[{"expirationInDays":30,"status":"Enabled"}]},"ownershipControls":{"rules":[{"objectOwnership":"ObjectWriter"}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.192.0"}},"Policy":{"id":"Policy","path":"GabiYogaStorage/LogBucket/Policy","children":{"Resource":{"id":"Resource","path":"GabiYogaStorage/LogBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"LogBucketCC3B17E8"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["LogBucketCC3B17E8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LogBucketCC3B17E8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.192.0","metadata":[]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"GabiYogaStorage/LogBucket/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"GabiYogaStorage/LogBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.192.0","metadata":[]}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"GabiYogaStorage/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"GabiYogaStorage/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.192.0"}},"Role":{"id":"Role","path":"GabiYogaStorage/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}},"Handler":{"id":"Handler","path":"GabiYogaStorage/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.192.0"}},"Distribution":{"id":"Distribution","path":"GabiYogaStorage/Distribution","children":{"Origin1":{"id":"Origin1","path":"GabiYogaStorage/Distribution/Origin1","children":{"S3Origin":{"id":"S3Origin","path":"GabiYogaStorage/Distribution/Origin1/S3Origin","children":{"Resource":{"id":"Resource","path":"GabiYogaStorage/Distribution/Origin1/S3Origin/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for GabiYogaStorageDistributionOrigin1AACB005D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"GabiYogaStorage/Distribution/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":"gabi-yoga-uploads.s3.us-west-2.amazonaws.com","id":"GabiYogaStorageDistributionOrigin1AACB005D","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"DistributionOrigin1S3Origin5F5C0696"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"GabiYogaStorageDistributionOrigin1AACB005D","allowedMethods":["GET","HEAD"],"cachedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":403,"responseCode":404,"responsePagePath":"/404.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"logging":{"bucket":{"Fn::GetAtt":["LogBucketCC3B17E8","RegionalDomainName"]},"prefix":"cloudfront-logs/"},"priceClass":"PriceClass_100"},"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.192.0","metadata":[]}},"BucketName":{"id":"BucketName","path":"GabiYogaStorage/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CloudFrontURL":{"id":"CloudFrontURL","path":"GabiYogaStorage/CloudFrontURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CloudFrontDistributionId":{"id":"CloudFrontDistributionId","path":"GabiYogaStorage/CloudFrontDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"GabiYogaStorage/CDKMetadata","children":{"Default":{"id":"Default","path":"GabiYogaStorage/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Exports":{"id":"Exports","path":"GabiYogaStorage/Exports","children":{"Output{\"Ref\":\"Distribution830FAC52\"}":{"id":"Output{\"Ref\":\"Distribution830FAC52\"}","path":"GabiYogaStorage/Exports/Output{\"Ref\":\"Distribution830FAC52\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"GabiYogaStorage/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"GabiYogaStorage/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.192.0"}},"GabiYogaDatabase":{"id":"GabiYogaDatabase","path":"GabiYogaDatabase","children":{"DatabaseSecurityGroup":{"id":"DatabaseSecurityGroup","path":"GabiYogaDatabase/DatabaseSecurityGroup","children":{"Resource":{"id":"Resource","path":"GabiYogaDatabase/DatabaseSecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Allow database connections","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputFnGetAttGabiYogaVpcB4D40C5DCidrBlockDDDDDA97"},"ipProtocol":"tcp","fromPort":3306,"toPort":3306,"description":"Allow MySQL connections from within the VPC"}],"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcB4D40C5D5926D330"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.192.0","metadata":[]}},"DatabaseCredentials":{"id":"DatabaseCredentials","path":"GabiYogaDatabase/DatabaseCredentials","children":{"Resource":{"id":"Resource","path":"GabiYogaDatabase/DatabaseCredentials/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"secretStringTemplate":"{\"username\":\"admin\"}","generateStringKey":"password","excludePunctuation":true,"includeSpace":false,"passwordLength":16},"name":"gabi-yoga-db-credentials","tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.192.0"}},"Attachment":{"id":"Attachment","path":"GabiYogaDatabase/DatabaseCredentials/Attachment","children":{"Resource":{"id":"Resource","path":"GabiYogaDatabase/DatabaseCredentials/Attachment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DatabaseCredentials8547B3E7"},"targetId":{"Ref":"DatabaseB269D8BB"},"targetType":"AWS::RDS::DBInstance"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.192.0","metadata":[]}},"Database":{"id":"Database","path":"GabiYogaDatabase/Database","children":{"SubnetGroup":{"id":"SubnetGroup","path":"GabiYogaDatabase/Database/SubnetGroup","children":{"Default":{"id":"Default","path":"GabiYogaDatabase/Database/SubnetGroup/Default","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for Database database","subnetIds":[{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcisolatedSubnet1Subnet239155F52268EAE8"},{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcisolatedSubnet2SubnetA5C8DA1718FD748B"}],"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.192.0","metadata":[]}},"Resource":{"id":"Resource","path":"GabiYogaDatabase/Database/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","allowMajorVersionUpgrade":false,"autoMinorVersionUpgrade":true,"backupRetentionPeriod":7,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.small","dbName":"yoga","dbSubnetGroupName":{"Ref":"DatabaseSubnetGroup7D60F180"},"deleteAutomatedBackups":false,"deletionProtection":true,"engine":"mysql","engineVersion":"8.0","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DatabaseCredentials8547B3E7"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DatabaseCredentials8547B3E7"},":SecretString:password::}}"]]},"maxAllocatedStorage":100,"multiAz":false,"publiclyAccessible":false,"storageType":"gp2","tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}],"vpcSecurityGroups":[{"Fn::GetAtt":["DatabaseSecurityGroup7319C0F6","GroupId"]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.192.0","metadata":[]}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"GabiYogaDatabase/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"GabiYogaDatabase/CDKMetadata","children":{"Default":{"id":"Default","path":"GabiYogaDatabase/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Exports":{"id":"Exports","path":"GabiYogaDatabase/Exports","children":{"Output{\"Ref\":\"DatabaseCredentialsAttachment7BAB329F\"}":{"id":"Output{\"Ref\":\"DatabaseCredentialsAttachment7BAB329F\"}","path":"GabiYogaDatabase/Exports/Output{\"Ref\":\"DatabaseCredentialsAttachment7BAB329F\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"GabiYogaDatabase/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"GabiYogaDatabase/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.192.0"}},"GabiYogaWebApp":{"id":"GabiYogaWebApp","path":"GabiYogaWebApp","children":{"WebSecurityGroup":{"id":"WebSecurityGroup","path":"GabiYogaWebApp/WebSecurityGroup","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/WebSecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for web servers","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow HTTP"},{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":443,"toPort":443,"description":"Allow HTTPS"},{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":22,"toPort":22,"description":"Allow SSH"}],"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}],"vpcId":{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcB4D40C5D5926D330"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.192.0"}},"from GabiYogaWebAppWebSecurityGroupB8A6BA72:5001":{"id":"from GabiYogaWebAppWebSecurityGroupB8A6BA72:5001","path":"GabiYogaWebApp/WebSecurityGroup/from GabiYogaWebAppWebSecurityGroupB8A6BA72:5001","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":5001,"groupId":{"Fn::GetAtt":["WebSecurityGroup73AF7387","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["WebSecurityGroup73AF7387","GroupId"]},"toPort":5001}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.192.0","metadata":[]}},"WebServerRole":{"id":"WebServerRole","path":"GabiYogaWebApp/WebServerRole","children":{"ImportWebServerRole":{"id":"ImportWebServerRole","path":"GabiYogaWebApp/WebServerRole/ImportWebServerRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"Resource":{"id":"Resource","path":"GabiYogaWebApp/WebServerRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ec2.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonSSMManagedInstanceCore"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonS3ReadOnlyAccess"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/CloudWatchAgentServerPolicy"]]}],"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.192.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"GabiYogaWebApp/WebServerRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/WebServerRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::gabi-yoga-uploads"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::gabi-yoga-uploads/*"]]}]},{"Action":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"Effect":"Allow","Resource":{"Fn::ImportValue":"GabiYogaDatabase:ExportsOutputRefDatabaseCredentialsAttachment7BAB329F508B30D6"}}],"Version":"2012-10-17"},"policyName":"WebServerRoleDefaultPolicy9AFE19CE","roles":[{"Ref":"WebServerRole42ABA571"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.192.0","metadata":[]}},"LoadBalancer":{"id":"LoadBalancer","path":"GabiYogaWebApp/LoadBalancer","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/LoadBalancer/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["WebSecurityGroup73AF7387","GroupId"]}],"subnets":[{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcpublicSubnet1SubnetF78B4A2131BBBBCC"},{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcpublicSubnet2Subnet810C6076C62BA0AE"}],"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}],"type":"application"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.192.0"}},"HttpListener":{"id":"HttpListener","path":"GabiYogaWebApp/LoadBalancer/HttpListener","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/LoadBalancer/HttpListener/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"redirect","redirectConfig":{"statusCode":"HTTP_301","port":"443","protocol":"HTTPS"}}],"loadBalancerArn":{"Ref":"LoadBalancerBE9EEC3A"},"port":80,"protocol":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.192.0"}},"WebTargetGroup":{"id":"WebTargetGroup","path":"GabiYogaWebApp/LoadBalancer/HttpListener/WebTargetGroup","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/LoadBalancer/HttpListener/WebTargetGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/api/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":5001,"protocol":"HTTP","tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}],"targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"instance","unhealthyThresholdCount":5,"vpcId":{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcB4D40C5D5926D330"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.192.0","metadata":[]}},"HttpsListener":{"id":"HttpsListener","path":"GabiYogaWebApp/LoadBalancer/HttpsListener","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/LoadBalancer/HttpsListener/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"certificates":[{"certificateArn":{"Fn::ImportValue":"GabiYogaDns:ExportsOutputRefCertificate4E7ABB08F7C8AF50"}}],"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"LoadBalancerHttpsListenerHttpsWebTargetGroup7A821C28"}}],"loadBalancerArn":{"Ref":"LoadBalancerBE9EEC3A"},"port":443,"protocol":"HTTPS","sslPolicy":"ELBSecurityPolicy-2016-08"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.192.0"}},"HttpsWebTargetGroup":{"id":"HttpsWebTargetGroup","path":"GabiYogaWebApp/LoadBalancer/HttpsListener/HttpsWebTargetGroup","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/LoadBalancer/HttpsListener/HttpsWebTargetGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/api/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":5001,"protocol":"HTTP","tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}],"targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"instance","unhealthyThresholdCount":5,"vpcId":{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcB4D40C5D5926D330"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.192.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.192.0","metadata":[]}},"WebServerLaunchTemplate":{"id":"WebServerLaunchTemplate","path":"GabiYogaWebApp/WebServerLaunchTemplate","children":{"Profile":{"id":"Profile","path":"GabiYogaWebApp/WebServerLaunchTemplate/Profile","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::InstanceProfile","aws:cdk:cloudformation:props":{"roles":[{"Ref":"WebServerRole42ABA571"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnInstanceProfile","version":"2.192.0"}},"Resource":{"id":"Resource","path":"GabiYogaWebApp/WebServerLaunchTemplate/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::LaunchTemplate","aws:cdk:cloudformation:props":{"launchTemplateData":{"iamInstanceProfile":{"arn":{"Fn::GetAtt":["WebServerLaunchTemplateProfile90C47AD5","Arn"]}},"imageId":{"Ref":"SsmParameterValueawsserviceamiamazonlinuxlatestamzn2amikernel510hvmx8664gp2C96584B6F00A464EAD1953AFF4B05118Parameter"},"instanceType":"t3.small","securityGroupIds":[{"Fn::GetAtt":["WebSecurityGroup73AF7387","GroupId"]}],"tagSpecifications":[{"resourceType":"instance","tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaWebApp/WebServerLaunchTemplate"},{"key":"Project","value":"GabiYoga"}]},{"resourceType":"volume","tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaWebApp/WebServerLaunchTemplate"},{"key":"Project","value":"GabiYoga"}]}],"userData":{"Fn::Base64":{"Fn::Join":["",["#!/bin/bash\necho \"Starting user data script execution at $(date)\"\nset -x\n#!/bin/bash\n# User data script for Gabi Yoga web application\n# This script installs Node.js using NVM on Amazon Linux 2 and prevents symlink issues\n\n# Helper function to safely remove any existing symlinks\nsafely_remove_symlink() {\n    local target=\"$1\"\n    if [ -L \"$target\" ]; then\n        echo \"Removing existing symlink at $target\"\n        rm \"$target\"\n    elif [ -e \"$target\" ]; then\n        echo \"Warning: $target exists but is not a symlink. Moving it to ${target}.bak\"\n        mv \"$target\" \"${target}.bak\"\n    fi\n}\n\n# Update system and install essential packages\nyum update -y\nyum install -y mysql mariadb-client git\n\n# Install NVM and Node.js\necho \"Installing NVM...\"\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"\n[ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"\necho \"Installing Node.js with NVM...\"\n\n# Source bashrc to ensure NVM is available\nsource ~/.bashrc || source ~/.bash_profile || true\nnvm install 16\nnvm use 16\nnvm alias default 16\n\n# Get the actual path to the Node.js binary\nREAL_NODE_PATH=\"$NVM_DIR/versions/node/v16.20.2/bin/node\"\nNODE_DIR=$(dirname \"$REAL_NODE_PATH\")\nREAL_NPM_PATH=\"$NODE_DIR/npm\"\necho \"Node.js installed version: $($REAL_NODE_PATH -v)\"\n\n# Make NVM available in the system profile\necho \"export NVM_DIR=\\\"\\$HOME/.nvm\\\"\" >> /etc/profile.d/nvm.sh\necho \"[ -s \\\"\\$NVM_DIR/nvm.sh\\\" ] && \\\\. \\\"\\$NVM_DIR/nvm.sh\\\"\" >> /etc/profile.d/nvm.sh\necho \"[ -s \\\"\\$NVM_DIR/bash_completion\\\" ] && \\\\. \\\"\\$NVM_DIR/bash_completion\\\"\" >> /etc/profile.d/nvm.sh\nchmod +x /etc/profile.d/nvm.sh\n\n# Remove any existing symlinks to avoid circular references\nsafely_remove_symlink \"/usr/bin/node\"\nsafely_remove_symlink \"/usr/bin/npm\" \nsafely_remove_symlink \"/usr/local/bin/node\"\nsafely_remove_symlink \"/usr/local/bin/npm\"\n\n# Create new clean symlinks to make node and npm available system-wide\nln -sf \"$REAL_NODE_PATH\" /usr/bin/node\nln -sf \"$REAL_NPM_PATH\" /usr/bin/npm\nln -sf \"$REAL_NODE_PATH\" /usr/local/bin/node\nln -sf \"$REAL_NPM_PATH\" /usr/local/bin/npm\n\necho \"Created system-wide Node.js symlinks\"\n\n# Install CloudWatch agent\nyum install -y amazon-cloudwatch-agent\n\n# Install required build tools for npm\nyum install -y gcc-c++ make\n\n# Create application directory\nmkdir -p /var/www/gabiyoga\n\n# Clone the actual repository now that it's public\necho \"Cloning application repository...\"\ngit clone https://github.com/jlandron/GabiYogaWebsite.git /var/www/gabiyoga-temp\n\n# If git clone succeeds, copy the files; otherwise create minimal application\nif [ $? -eq 0 ]; then\n  cp -R /var/www/gabiyoga-temp/* /var/www/gabiyoga/\n  cp -R /var/www/gabiyoga-temp/.* /var/www/gabiyoga/ 2>/dev/null || echo \"No hidden files to copy\"\n  rm -rf /var/www/gabiyoga-temp\n  echo \"✅ Repository cloned successfully\"\nelse\n  echo \"⚠️ Repository clone failed, creating minimal application\"\n  \n  # Create a minimal server.js file for health checks\n  cat > /var/www/gabiyoga/server.js << 'EOL'\n// Minimal Express server for Gabi Yoga (Fallback version)\nconst express = require('express');\nconst app = express();\nconst port = process.env.PORT || 5001;\n\n// Middleware\napp.use(express.json());\napp.use(express.static('public'));\n\n// Health check endpoint\napp.get('/api/health', (req, res) => {\n  res.json({ status: 'ok', message: 'Server is running' });\n});\n\n// Basic API endpoint\napp.get('/api', (req, res) => {\n  res.json({ \n    message: 'Gabi Yoga API is running',\n    version: '1.0.0',\n    timestamp: new Date()\n  });\n});\n\napp.listen(port, () => {\n  console.log(`Server running on port ${port}`);\n});\nEOL\n\n# Create package.json\ncat > /var/www/gabiyoga/package.json << 'EOL'\n{\n  \"name\": \"gabi-yoga\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Gabi Yoga Web Application\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"start\": \"node server.js\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.17.1\"\n  }\n}\nEOL\n\n# Create public directory and index.html\nmkdir -p /var/www/gabiyoga/public\ncat > /var/www/gabiyoga/public/index.html << 'EOL'\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Gabi Yoga</title>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; color: #333; }\n    .container { max-width: 800px; margin: 0 auto; padding: 20px; }\n    h1 { color: #2c3e50; }\n    .status { padding: 20px; background: #f8f9fa; border-radius: 5px; margin-top: 20px; }\n    .success { background: #d4edda; color: #155724; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>Gabi Yoga</h1>\n    <p>This is a temporary placeholder page.</p>\n    \n    <div class=\"status success\">\n      <h2>Server Status</h2>\n      <p>The server is running successfully.</p>\n    </div>\n  </div>\n</body>\n</html>\nEOL\n\necho \"Created minimal application files\"\n\n# Setup environment variables\necho \"Setting up environment variables\"\ncat > /var/www/gabiyoga/.env << EOL\nNODE_ENV=production\nPORT=5001\nDB_TYPE=mysql\nDB_HOST=gabiyogadatabase-databaseb269d8bb-2ftmtodc9lpf.cxq64wemez5f.us-west-2.rds.amazonaws.com\nDB_PORT=3306\nDB_NAME=yoga\nDB_USER=admin\nDB_PASSWORD=8O4Lfa8tq10wgAg8\nAWS_REGION=us-west-2\nS3_BUCKET_NAME=gabi-yoga-uploads\nCLOUDFRONT_DISTRIBUTION_ID=",{"Fn::ImportValue":"GabiYogaStorage:ExportsOutputRefDistribution830FAC524DF81588"},"\nJWT_SECRET=8b6b566f9125ce96c553d5bc46f6a0e0758bb8211500515e9a24dfe2d6cdebc6e721bb398906c203a7cde28b70b75561e470607cd8eeb49849d34bc8f5782f36131ccbcd516408028fdc85f5bde689f7cf5f2f47287ef28d5ae55728d92db6fc90db2137e781ce15be1744346ea857ee6b8082b672ab9c8ef4eea9062a9ff72c658e0527e98b217bf6d565361ccac0a543306ee220afaf0ecd3aef6dcc4711808389566ffd4b6e1d317b26225e94bfd8598745dcf2c3a9a2a339227c5b2c7ada2b4d8dc840e938f1f1575f7c5cc9c96cc6a084efaa186360bdd64c9dedf1b15c14e3868713710b9f90e90f64feb2a36e587e7f38d09ee5c40be3c4a4d57e35fe\nEOL\n\n# Install dependencies with logging\ncd /var/www/gabiyoga\necho \"Installing npm dependencies...\"\nnpm install --production 2>&1 | tee /var/log/npm-install.log || { echo \"npm install failed\"; exit 1; }\necho \"NPM dependencies installed successfully\"\n\n# Create a start script and make sure server.js is the entrypoint\necho \"Ensuring start script exists in package.json\"\nif [ -f /var/www/gabiyoga/package.json ]; then\n  node -e 'const fs=require(\"fs\"); const pkg=JSON.parse(fs.readFileSync(\"/var/www/gabiyoga/package.json\")); if(!pkg.scripts) pkg.scripts={}; if(!pkg.scripts.start) pkg.scripts.start=\"node server.js\"; fs.writeFileSync(\"/var/www/gabiyoga/package.json\", JSON.stringify(pkg, null, 2))'\nelse\n  echo \"package.json not found, cannot add start script\"\nfi\n\n# Setup systemd service\ncat > /etc/systemd/system/gabiyoga.service << EOL\n[Unit]\nDescription=Gabi Yoga Web Application\nAfter=network.target\n\n[Service]\nType=simple\nUser=root\nWorkingDirectory=/var/www/gabiyoga\nExecStart=/usr/local/bin/node /var/www/gabiyoga/server.js\nRestart=on-failure\nRestartSec=10\nStandardOutput=journal\nStandardError=journal\nSyslogIdentifier=gabiyoga\nEnvironment=NODE_ENV=production\n\n[Install]\nWantedBy=multi-user.target\nEOL\n\n# Set proper permissions\nchown -R root:root /var/www/gabiyoga\n\n# Test Node.js before starting the service\necho \"Testing Node.js installation...\"\nwhich node && echo \"Node path: $(which node)\"\nls -la /usr/bin/node || echo \"Node binary not found in /usr/bin\"\nls -la /var/www/gabiyoga/server.js || { echo \"server.js not found\"; exit 1; }\n\n# Start the service\nsystemctl daemon-reload\nsystemctl enable gabiyoga\nsystemctl restart gabiyoga || echo \"Failed to start service, check journalctl -u gabiyoga for details\"\n\n# Verify service status (for logging)\nsystemctl status gabiyoga --no-pager\n\n# Create troubleshooting script\ncat > /home/ec2-user/troubleshoot.sh << EOL\n#!/bin/bash\necho \"=== System Info ===\"\ndate\nhostname\nuname -a\n\necho \"\\n=== Service Status ===\"\nsystemctl status gabiyoga\n\necho \"\\n=== Last 30 Lines of Service Logs ===\"\njournalctl -u gabiyoga -n 30\n\necho \"\\n=== Network Ports ===\"\nnetstat -tulpn | grep -E \"5001|80|443\"\n\necho \"\\n=== Node Process ===\"\nps aux | grep node\n\necho \"\\n=== Environment Check ===\"\ncd /var/www/gabiyoga\nls -la\ncat .env | grep -v PASSWORD\n\necho \"\\n=== Available Versions ===\"\n/usr/local/bin/node -v || echo \"Node not found at /usr/local/bin/node\"\n/usr/local/bin/npm -v || echo \"npm not found at /usr/local/bin/npm\"\necho \"\\n=== NVM Installation ===\"\nif [ -s \"$HOME/.nvm/nvm.sh\" ]; then\n  echo \"NVM is installed\"\n  source \"$HOME/.nvm/nvm.sh\"\n  echo \"Node.js via NVM: $(node -v)\"\n  echo \"npm via NVM: $(npm -v)\"\nelse\n  echo \"NVM not found in $HOME/.nvm\"\nfi\n\necho \"\\n=== Package.json ===\"\ncat package.json\n\necho \"\\n=== Firewall Status ===\"\nsystemctl status firewalld || echo \"Firewall not running\"\n\necho \"\\n=== Network Configuration ===\"\nifconfig || ip addr\nEOL\nchmod +x /home/ec2-user/troubleshoot.sh\n\n# Make sure the ec2-user can access the troubleshooting script\nchmod 755 /home/ec2-user/troubleshoot.sh\nchown ec2-user:ec2-user /home/ec2-user/troubleshoot.sh\n\n# Run troubleshooting script once on first boot for logs\n/home/ec2-user/troubleshoot.sh > /home/ec2-user/first-boot-debug.log 2>&1 || true\nchown ec2-user:ec2-user /home/ec2-user/first-boot-debug.log\n\n# Create a log directory for application logs\nmkdir -p /var/log/gabiyoga\ntouch /var/log/gabiyoga/server.log\nchmod 644 /var/log/gabiyoga/server.log\nchown root:root /var/log/gabiyoga/server.log\n\n# Add a message indicating setup is complete\necho \"GabiYoga webapp setup complete at $(date)\" >> /var/log/gabiyoga/setup.log\n\n# Create a manual server check script\ncat > /home/ec2-user/check-server.sh << EOL\n#!/bin/bash\n# Manual server verification script for Gabi Yoga Web App instances\n\necho \"=============================================\"\necho \"Gabi Yoga Server Verification Script\"\necho \"=============================================\"\necho\n\n# Check Node.js installation\necho \"Checking Node.js installation...\"\nNODE_VERSION=$(sudo /usr/local/bin/node -v)\nif [ \\$? -ne 0 ]; then\n  echo \"❌ Node.js is not properly installed at /usr/local/bin/node!\"\n  echo \"Checking NVM installation...\"\n  if [ -s \"$HOME/.nvm/nvm.sh\" ]; then\n    echo \"✅ NVM is installed\"\n    source \"$HOME/.nvm/nvm.sh\"\n    NODE_NVM_VERSION=$(node -v)\n    echo \"✅ Node.js version via NVM: \\$NODE_NVM_VERSION\"\n  else\n    echo \"❌ NVM is not properly installed!\"\n  fi\nelse\n  echo \"✅ Node.js version: \\$NODE_VERSION\"\nfi\n\n# Check npm installation\necho \"Checking npm installation...\"\nNPM_VERSION=$(sudo /usr/local/bin/npm -v)\nif [ \\$? -ne 0 ]; then\n  echo \"❌ npm is not properly installed at /usr/local/bin/npm!\"\n  if [ -s \"$HOME/.nvm/nvm.sh\" ]; then\n    source \"$HOME/.nvm/nvm.sh\"\n    NPM_NVM_VERSION=$(npm -v)\n    echo \"✅ npm version via NVM: \\$NPM_NVM_VERSION\"\n  fi\nelse\n  echo \"✅ npm version: \\$NPM_VERSION\"\nfi\n\n# Check if server.js exists\necho \"Checking if server.js exists...\"\nif [ -f /var/www/gabiyoga/server.js ]; then\n  echo \"✅ server.js exists\"\nelse\n  echo \"❌ server.js not found!\"\nfi\n\n# Check server service status\necho \"Checking gabiyoga service status...\"\nSYSTEMD_STATUS=$(systemctl is-active gabiyoga)\nif [ \"\\$SYSTEMD_STATUS\" = \"active\" ]; then\n  echo \"✅ gabiyoga service is running\"\nelse\n  echo \"❌ gabiyoga service is not running (status: \\$SYSTEMD_STATUS)\"\n  echo \"Service logs:\"\n  echo \"---------------------------------------------\"\n  sudo journalctl -u gabiyoga -n 15\n  echo \"---------------------------------------------\"\nfi\n\n# Check port binding\necho \"Checking if application is listening on port 5001...\"\nLISTENING=$(netstat -tulpn 2>/dev/null | grep 5001)\nif [ -z \"\\$LISTENING\" ]; then\n  echo \"❌ No process is listening on port 5001\"\nelse\n  echo \"✅ Process found listening on port 5001:\"\n  echo \"\\$LISTENING\"\nfi\n\n# Check if app is responding to requests\necho \"Testing HTTP request to localhost:5001/api/health...\"\nHEALTH_CHECK=$(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:5001/api/health)\nif [ \"\\$HEALTH_CHECK\" = \"200\" ]; then\n  echo \"✅ Application responded with 200 OK\"\nelse\n  echo \"❌ Application did not respond correctly (status: \\$HEALTH_CHECK)\"\nfi\n\necho\necho \"=============================================\"\necho \"If service is not running, try these commands:\"\necho \"sudo systemctl restart gabiyoga\"\necho \"sudo journalctl -u gabiyoga -f\"\necho \"cd /var/www/gabiyoga && sudo node server.js\"\necho \"=============================================\"\nEOL\nchmod +x /home/ec2-user/check-server.sh\nchown ec2-user:ec2-user /home/ec2-user/check-server.sh\n\necho \"User data script completed at $(date)\""]]}}},"tagSpecifications":[{"resourceType":"launch-template","tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaWebApp/WebServerLaunchTemplate"},{"key":"Project","value":"GabiYoga"}]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnLaunchTemplate","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.LaunchTemplate","version":"2.192.0","metadata":[]}},"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"GabiYogaWebApp/SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"GabiYogaWebApp/SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"WebServerASG":{"id":"WebServerASG","path":"GabiYogaWebApp/WebServerASG","children":{"ASG":{"id":"ASG","path":"GabiYogaWebApp/WebServerASG/ASG","attributes":{"aws:cdk:cloudformation:type":"AWS::AutoScaling::AutoScalingGroup","aws:cdk:cloudformation:props":{"desiredCapacity":"2","launchTemplate":{"launchTemplateId":{"Ref":"WebServerLaunchTemplateF0B86FE6"},"version":{"Fn::GetAtt":["WebServerLaunchTemplateF0B86FE6","LatestVersionNumber"]}},"maxSize":"4","minSize":"2","tags":[{"key":"Environment","value":"Production","propagateAtLaunch":true},{"key":"Project","value":"GabiYoga","propagateAtLaunch":true}],"targetGroupArns":[{"Ref":"LoadBalancerHttpListenerWebTargetGroup156743A2"},{"Ref":"LoadBalancerHttpsListenerHttpsWebTargetGroup7A821C28"}],"vpcZoneIdentifier":[{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcpublicSubnet1SubnetF78B4A2131BBBBCC"},{"Fn::ImportValue":"GabiYogaNetwork:ExportsOutputRefGabiYogaVpcpublicSubnet2Subnet810C6076C62BA0AE"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.CfnAutoScalingGroup","version":"2.192.0"}},"ScalingPolicyCpuScaling":{"id":"ScalingPolicyCpuScaling","path":"GabiYogaWebApp/WebServerASG/ScalingPolicyCpuScaling","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/WebServerASG/ScalingPolicyCpuScaling/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::AutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"autoScalingGroupName":{"Ref":"WebServerASG5A722E5A"},"cooldown":"300","policyType":"TargetTrackingScaling","targetTrackingConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ASGAverageCPUUtilization"},"targetValue":70}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.CfnScalingPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.TargetTrackingScalingPolicy","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.AutoScalingGroup","version":"2.192.0","metadata":[]}},"WebAppLogs":{"id":"WebAppLogs","path":"GabiYogaWebApp/WebAppLogs","children":{"Resource":{"id":"Resource","path":"GabiYogaWebApp/WebAppLogs/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":14,"tags":[{"key":"Environment","value":"Production"},{"key":"Project","value":"GabiYoga"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.192.0","metadata":[]}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"GabiYogaWebApp/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"WebServerSecurityGroup":{"id":"WebServerSecurityGroup","path":"GabiYogaWebApp/WebServerSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"DeploymentInstructions":{"id":"DeploymentInstructions","path":"GabiYogaWebApp/DeploymentInstructions","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"GabiYogaWebApp/CDKMetadata","children":{"Default":{"id":"Default","path":"GabiYogaWebApp/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"GabiYogaWebApp/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"GabiYogaWebApp/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.192.0"}},"GabiYogaDns":{"id":"GabiYogaDns","path":"GabiYogaDns","children":{"ImportedHostedZone":{"id":"ImportedHostedZone","path":"GabiYogaDns/ImportedHostedZone","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.192.0","metadata":[]}},"Certificate":{"id":"Certificate","path":"GabiYogaDns/Certificate","children":{"Resource":{"id":"Resource","path":"GabiYogaDns/Certificate/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"gabi.yoga","domainValidationOptions":[{"domainName":"gabi.yoga","hostedZoneId":"Z0858162FM97J2FO2QJU"},{"domainName":"www.gabi.yoga","hostedZoneId":"Z0858162FM97J2FO2QJU"}],"subjectAlternativeNames":["www.gabi.yoga"],"tags":[{"key":"Environment","value":"Production"},{"key":"Name","value":"GabiYogaDns/Certificate"},{"key":"Project","value":"GabiYoga"}],"validationMethod":"DNS"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.192.0","metadata":[]}},"HostedZoneId":{"id":"HostedZoneId","path":"GabiYogaDns/HostedZoneId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CertificateArn":{"id":"CertificateArn","path":"GabiYogaDns/CertificateArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"DnsConfigInstructions":{"id":"DnsConfigInstructions","path":"GabiYogaDns/DnsConfigInstructions","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"GabiYogaDns/CDKMetadata","children":{"Default":{"id":"Default","path":"GabiYogaDns/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Exports":{"id":"Exports","path":"GabiYogaDns/Exports","children":{"Output{\"Ref\":\"Certificate4E7ABB08\"}":{"id":"Output{\"Ref\":\"Certificate4E7ABB08\"}","path":"GabiYogaDns/Exports/Output{\"Ref\":\"Certificate4E7ABB08\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.192.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"GabiYogaDns/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.192.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"GabiYogaDns/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.192.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.192.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.192.0"}}}